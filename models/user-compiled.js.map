{"version":3,"sources":["user.js"],"names":[],"mappings":";;;;AAIA,IAAI,WAAW,QAAQ,UAAR,CAAf;AACA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,SAAS,SAAS,MAAtB;;;;;AAKA,IAAI,OAAO,OAAO,WAAP,CAAmB,EAAnB,CAAX;;;AAIA,IAAI,aAAa,IAAI,MAAJ,CAAW;AACxB,cAAU,EAAC,MAAM,MAAP,EAAe,UAAU,IAAzB,EAA+B,QAAQ,IAAvC,EADc;AAExB,cAAU,EAAC,MAAM,MAAP,EAFc;AAGxB,WAAO,EAAC,MAAM,MAAP,EAAe,UAAU,IAAzB,EAHiB;AAIxB,gBAAY,IAJY;AAKxB,WAAQ,CAAC,EAAE,MAAM,OAAO,KAAP,CAAa,QAArB,EAA+B,KAAK,OAApC,EAAD;AALgB,CAAX,CAAjB;;;;;AAYA,WAAW,GAAX,CAAe,MAAf,EAAuB,UAAU,IAAV,EAAgB;;AAEnC,QAAI,cAAc,IAAI,IAAJ,EAAlB;;AAEA,QAAI,CAAC,KAAK,UAAV,EACI,KAAK,UAAL,GAAkB,WAAlB;;AAEJ,QAAI,KAAK,QAAT,EAAmB;;AAEf,aAAK,QAAL,GAAgB,OAAO,QAAP,CAAgB,KAAK,QAArB,EAA+B,IAA/B,CAAhB;AACH;;AAED;AACH,CAbD;;;;AAiBA,IAAI,OAAO,SAAS,KAAT,CAAe,MAAf,EAAuB,UAAvB,CAAX;;;AAGA,OAAO,OAAP,GAAiB,IAAjB","file":"user-compiled.js","sourcesContent":["/**\r\n * Created by Dani on 03.07.2016.\r\n */\r\n// grab the things we need\r\nvar mongoose = require('mongoose');\r\nvar bcrypt = require('bcryptjs');\r\nvar Schema = mongoose.Schema;\r\n\r\n/**\r\n * Security\r\n */\r\nvar salt = bcrypt.genSaltSync(10);\r\n\r\n\r\n// create a schema\r\nvar userSchema = new Schema({\r\n    username: {type: String, required: true, unique: true},\r\n    password: {type: String},\r\n    email: {type: String, required: true},\r\n    created_at: Date,\r\n    group : [{ type: Schema.Types.ObjectId, ref: 'Group' }]\r\n});\r\n\r\n\r\n/**\r\n * Before save\r\n */\r\nuserSchema.pre('save', function (next) {\r\n    // get the current date\r\n    var currentDate = new Date();\r\n    // if created_at doesn't exist, add to that field\r\n    if (!this.created_at)\r\n        this.created_at = currentDate;\r\n\r\n    if (this.password) {\r\n        // Setting new password: hash it\r\n        this.password = bcrypt.hashSync(this.password, salt);\r\n    }\r\n\r\n    next();\r\n});\r\n\r\n// the schema is useless so far\r\n// we need to create a model using it\r\nvar User = mongoose.model('User', userSchema);\r\n\r\n// make this available to our users in our Node applications\r\nmodule.exports = User;"]}