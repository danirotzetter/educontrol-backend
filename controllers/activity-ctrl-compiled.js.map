{"version":3,"sources":["activity-ctrl.js"],"names":[],"mappings":"AAAA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,aAAa,QAAQ,MAAR,EAAjB;AACA,IAAI,UAAU,QAAQ,sBAAR,CAAd;AACA,IAAI,WAAW,QAAQ,uBAAR,CAAf;AACA,IAAI,QAAQ,QAAQ,oBAAR,CAAZ;AACA,MAAM,SAAS,QAAQ,kBAAR,CAAf;;;;;AAMA,WAAW,GAAX,CAAe,GAAf,EAAoB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACpC,aAAS,IAAT,CAAc,EAAd,EAAkB,QAAlB,CAA2B,EAAC,MAAM,QAAP,EAAiB,UAAU,EAAC,MAAM,QAAP,EAA3B,EAA3B,EAAyE,IAAzE,CAA8E,UAAU,GAAV,EAAe,IAAf,EAAqB;AAC/F,YAAI,GAAJ,EAAS;AACL,mBAAO,IAAI,IAAJ,CAAS,GAAT,EAAc;AACjB,yBAAS;AADQ,aAAd,CAAP;AAGH;AACD,eAAO,IAAI,IAAJ,CAAS,IAAT,CAAP;AACH,KAPD;AAQH,CATD;;;;;AAeA,WAAW,GAAX,CAAe,MAAf,EAAuB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACvC,QAAI,KAAK,IAAI,MAAJ,CAAW,EAApB;AACA,aAAS,OAAT,CAAiB,EAAC,KAAK,EAAN,EAAjB,EAA4B,QAA5B,CAAqC,EAAC,MAAM,QAAP,EAAiB,UAAU,EAAC,MAAM,QAAP,EAA3B,EAArC,EAAmF,IAAnF,CAAwF,UAAU,GAAV,EAAe,OAAf,EAAwB;AAC5G,YAAI,GAAJ,EAAS;AACL,mBAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB;AACxB,yBAAS;AADe,aAArB,CAAP;AAGH;AACD,YAAI,CAAC,OAAL,EAAc;AACV,mBAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB;AACxB,yBAAS;AADe,aAArB,CAAP;AAGH;AACD,eAAO,IAAI,IAAJ,CAAS,OAAT,CAAP;AACH,KAZD;AAaH,CAfD;;;;;AAqBA,WAAW,IAAX,CAAgB,GAAhB,EAAqB,UAAU,GAAV,EAAe,GAAf,EAAoB;;AAErC,QAAI,WAAW,IAAI,QAAJ,CAAa;AACxB,cAAM,IAAI,IAAJ,CAAS,IADS;AAExB,cAAM,IAAI,IAAJ,CAAS,IAFS;AAGxB,oBAAW,IAAI,IAAJ,CAAS;AAHI,KAAb,CAAf;;AAMA,aAAS,IAAT,CAAc,UAAU,GAAV,EAAe,QAAf,EAAyB;AACnC,YAAI,GAAJ,EAAS;AACL,oBAAQ,GAAR,CAAY,0BAA0B,GAAtC;AACA,mBAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB;AACxB,yBAAS,mBADe;AAExB,uBAAO;AAFiB,aAArB,CAAP;AAIH,SAND,MAOK;AACD,oBAAQ,GAAR,CAAY,gCAAgC,GAA5C;AACA,mBAAO,IAAI,IAAJ,CAAS;AACZ,yBAAS,OADG;AAEZ,qBAAK,QAAQ;AAFD,aAAT,CAAP;AAIH;AACJ,KAfD;AAgBH,CAxBD;;AA6BA,OAAO,OAAP,GAAiB,QAAjB","file":"activity-ctrl-compiled.js","sourcesContent":["var express = require('express');\r\nvar activities = express.Router();\r\nvar Project = require('../models/project.js');\r\nvar Activity = require('../models/activity.js');\r\nvar Value = require('../models/value.js');\r\nconst config = require('../app/config.js');\r\n\r\n\r\n/**\r\n * List of all activities\r\n */\r\nactivities.get('/', function (req, res) {\r\n    Activity.find({}).populate({path: 'values', populate: {path: 'metric'}}).exec(function (err, list) {\r\n        if (err) {\r\n            return res.json(500, {\r\n                message: 'Error getting objects'\r\n            });\r\n        }\r\n        return res.json(list);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Find user by id\r\n */\r\nactivities.get('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    Activity.findOne({_id: id}).populate({path: 'values', populate: {path: 'metric'}}).exec(function (err, project) {\r\n        if (err) {\r\n            return res.status(500).json({\r\n                message: 'Error when getting object'\r\n            });\r\n        }\r\n        if (!project) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        return res.json(project);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Create new activity\r\n */\r\nactivities.post('/', function (req, res) {\r\n    // Activity object\r\n    var activity = new Activity({\r\n        name: req.body.name,\r\n        date: req.body.date,\r\n        activities:req.body.activities\r\n    });\r\n\r\n    Activity.save(function (err, activity) {\r\n        if (err) {\r\n            console.log('Error saving project ' + err);\r\n            return res.status(500).json({\r\n                message: 'Error when saving',\r\n                error: err\r\n            });\r\n        }\r\n        else {\r\n            console.log('Successfully saved project ' + err);\r\n            return res.json({\r\n                message: 'saved',\r\n                _id: project._id\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\nmodule.exports = projects;"]}