{"version":3,"sources":["user-ctrl.js"],"names":[],"mappings":"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","file":"user-ctrl-compiled.js","sourcesContent":["var express = require('express');\r\nvar users = express.Router();\r\nvar Model = require('../models/user.js')\r\n\r\nusers.get('/', function(req, res) {\r\n    Model.find(function(err, list){\r\n            if(err) {\r\n                return res.json(500, {\r\n                    message: 'Error getting users.'\r\n                });\r\n            }\r\n            return res.json(list);\r\n    });\r\n});\r\n\r\nusers.post('/', function(req, res) {\r\n    var user = new Model({\r\n        name: req.body.name,\r\n        email: req.body.email,\r\n        age: req.body.age\r\n    });\r\n    user.save(function(err, user){\r\n        if(req.accepts('json')) {\r\n            if(err) {\r\n                return res.json(500, {\r\n                    message: 'Error saving user',\r\n                    error: err\r\n                });\r\n            }\r\n            return res.json({\r\n                message: 'saved',\r\n                _id: user._id\r\n            });\r\n        } else {\r\n            if(err) {\r\n                return res.send('500: Internal Server Error', 500);\r\n            }\r\n            return res.render('users/edit', {user: user});\r\n        }\r\n    });\r\n});\r\n\r\nusers.get('/:id', function(req, res) {\r\n    var id = req.params.id;\r\n    Model.findOne({_id: id}, function(err, user){\r\n        if(req.accepts('json')) {\r\n            if(err) {\r\n                return res.json(500, {\r\n                    message: 'Error getting user.'\r\n                });\r\n            }\r\n            if(!user) {\r\n                return res.json(404, {\r\n                    message: 'No such user'\r\n                });\r\n            }\r\n            return res.json(user);\r\n        } else {\r\n            if(err) {\r\n                return res.send('500: Internal Server Error', 500);\r\n            }\r\n            if(!user) {\r\n                return res.end('No such user');\r\n            }\r\n            return res.render('users/edit', {user: user, flash: 'Created.'});\r\n        }\r\n    });\r\n});\r\n\r\nusers.put('/:id', function(req, res) {\r\n    var id = req.params.id;\r\n    Model.findOne({_id: id}, function(err, user){\r\n        if(req.accepts('json')) {\r\n            if(err) {\r\n                return res.json(500, {\r\n                    message: 'Error saving user',\r\n                    error: err\r\n                });\r\n            }\r\n            if(!user) {\r\n                return res.json(404, {\r\n                    message: 'No such user'\r\n                });\r\n            }\r\n            user.name = req.body.name ? req.body.name : user.name;\r\n            user.email = req.body.email ? req.body.email : user.email;\r\n            user.age = req.body.age ? req.body.age : user.age;\r\n            user.save(function(err, user){\r\n                if(err) {\r\n                    return res.json(500, {\r\n                        message: 'Error getting user.'\r\n                    });\r\n                }\r\n                if(!user) {\r\n                    return res.json(404, {\r\n                        message: 'No such user'\r\n                    });\r\n                }\r\n                return res.json(user);\r\n            });\r\n        } else {\r\n            if(err) {\r\n                return res.send('500: Internal Server Error', 500);\r\n            }\r\n            if(!user) {\r\n                return res.end('No such user');\r\n            }\r\n            user.name = req.body.name ? req.body.name : user.name;\r\n            user.email = req.body.email ? req.body.email : user.email;\r\n            user.age = req.body.age ? req.body.age : user.age;\r\n            user.save(function(err, user){\r\n                if(err) {\r\n                    return res.send('500: Internal Server Error', 500);\r\n                }\r\n                if(!user) {\r\n                    return res.end('No such user');\r\n                }\r\n                return res.render('users/edit', {user: user, flash: 'Saved.'});\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\nusers.delete('/:id', function(req, res) {\r\n    var id = req.params.id;\r\n    Model.findOne({_id: id}, function(err, user){\r\n        if(req.accepts('json')) {\r\n            if(err) {\r\n                return res.json(500, {\r\n                    message: 'Error getting user.'\r\n                });\r\n            }\r\n            if(!user) {\r\n                return res.json(404, {\r\n                    message: 'No such user'\r\n                });\r\n            }\r\n            return res.json(user);\r\n        } else {\r\n            if(err) {\r\n                return res.send('500: Internal Server Error', 500);\r\n            }\r\n            if(!user) {\r\n                return res.end('No such user');\r\n            }\r\n            return res.render('index', {flash: 'Item deleted.'});\r\n        }\r\n    });\r\n});\r\n\r\n\r\nmodule.exports = users;"]}