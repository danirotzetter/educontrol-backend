{"version":3,"sources":["metric-ctrl.js"],"names":[],"mappings":"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","file":"metric-ctrl-compiled.js","sourcesContent":["var express = require('express');\r\nvar metrics = express.Router();\r\nvar Model = require('../models/metric.js');\r\nconst config = require('../app/config.js');\r\n\r\n\r\n/**\r\n * List of all metrics\r\n */\r\nmetrics.get('/', function (req, res) {\r\n    Model.find(function (err, list) {\r\n        if (err) {\r\n            return res.json(500, {\r\n                message: 'Error getting users.'\r\n            });\r\n        }\r\n        return res.json(list);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Find user by id\r\n */\r\nmetrics.get('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    Model.findOne({_id: id}, function (err, metric) {\r\n        if (err) {\r\n            return res.status(500).json({\r\n                message: 'Error when getting object'\r\n            });\r\n        }\r\n        if (!metric) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        return res.json(metric);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Create new metric\r\n */\r\nmetrics.post('/', function (req, res) {\r\n    console.log('About to save metric');\r\n    var metric= new Model({\r\n        firstName: req.body.firstName,\r\n        lastName: req.body.lastName,\r\n        email: req.body.email,\r\n        birthday: req.body.birthday\r\n    });\r\n    metric.save(function (err, user) {\r\n        if (err) {\r\n            console.log('Error saving metric '+err);\r\n            return res.status(500).json({\r\n                message: 'Error when saving',\r\n                error: err\r\n            });\r\n        }\r\n        else{\r\n            console.log('Successfully saved metric '+err);\r\n        return res.json({\r\n            message: 'saved',\r\n            _id: metric._id\r\n        });\r\n        }\r\n    });\r\n});\r\n\r\n/**\r\n * Update\r\n */\r\nmetrics.put('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    console.log('Update metric with id '+id);\r\n    Model.findOne({_id: id}, function (err, metric) {\r\n        if (err) {\r\n            return res.status(500).json({\r\n                message: 'Error updating',\r\n                error: err\r\n            });\r\n        }\r\n        else if (!metric) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        else {\r\n            metric.firstName = req.body.firstName? req.body.firstName: metric.firstName;\r\n            metric.lastName = req.body.lastName ? req.body.lastName : metric.lastName;\r\n            metric.email = req.body.email? req.body.email : metric.email;\r\n            metric.birthday= req.body.birthday ? req.body.birthday : metric.birthday;\r\n            metric.save(function (err, metric) {\r\n                if (err) {\r\n                    return res.status(500).json({\r\n                        message: 'Error saving'\r\n                    });\r\n                }\r\n                else if (!metric) {\r\n                    return res.status(404).json({\r\n                        message: 'Not found'\r\n                    });\r\n                }\r\n                else {\r\n                    return res.json(metric);\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Delete by id\r\n */\r\nmetrics.delete('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    console.log('About to delete metric '+id);\r\n    Model.findOne({_id: id}, function (err, metric) {\r\n        if (err) {\r\n            return res.status(500).json( {\r\n                message: 'Error finding object'\r\n            });\r\n        }\r\n        if (!metric) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        metric.remove(function(err) {\r\n            if (err) {\r\n                return res.status(500).json({\r\n                    message: 'Error deleting'\r\n                });\r\n            }\r\n            return res.json({message:'Successfully deleted object'});\r\n        });\r\n    });\r\n});\r\n\r\n\r\n\r\nmodule.exports = metrics;"]}