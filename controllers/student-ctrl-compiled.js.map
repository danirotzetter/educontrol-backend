{"version":3,"sources":["student-ctrl.js"],"names":[],"mappings":"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","file":"student-ctrl-compiled.js","sourcesContent":["var express = require('express');\r\nvar students = express.Router();\r\nvar Model = require('../models/student.js');\r\nconst config = require('../app/config.js');\r\n\r\n\r\n/**\r\n * List of all students\r\n */\r\nstudents.get('/', function (req, res) {\r\n    Model.find(function (err, list) {\r\n        if (err) {\r\n            return res.json(500, {\r\n                message: 'Error getting users.'\r\n            });\r\n        }\r\n        return res.json(list);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Find user by id\r\n */\r\nstudents.get('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    Model.findOne({_id: id}, function (err, student) {\r\n        if (err) {\r\n            return res.status(500).json({\r\n                message: 'Error when getting object'\r\n            });\r\n        }\r\n        if (!student) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        return res.json(student);\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Create new student\r\n */\r\nstudents.post('/', function (req, res) {\r\n    console.log('About to save student');\r\n    var student= new Model({\r\n        firstName: req.body.firstName,\r\n        lastName: req.body.lastName,\r\n        email: req.body.email,\r\n        birthday: req.body.birthday\r\n    });\r\n    student.save(function (err, user) {\r\n        if (err) {\r\n            console.log('Error saving student '+err);\r\n            return res.status(500).json({\r\n                message: 'Error when saving',\r\n                error: err\r\n            });\r\n        }\r\n        else{\r\n            console.log('Successfully saved student '+err);\r\n        return res.json({\r\n            message: 'saved',\r\n            _id: student._id\r\n        });\r\n        }\r\n    });\r\n});\r\n\r\n/**\r\n * Update\r\n */\r\nstudents.put('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    console.log('Update student with id '+id);\r\n    Model.findOne({_id: id}, function (err, student) {\r\n        if (err) {\r\n            return res.status(500).json({\r\n                message: 'Error updating',\r\n                error: err\r\n            });\r\n        }\r\n        else if (!student) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        else {\r\n            student.firstName = req.body.firstName? req.body.firstName: student.firstName;\r\n            student.lastName = req.body.lastName ? req.body.lastName : student.lastName;\r\n            student.email = req.body.email? req.body.email : student.email;\r\n            student.birthday= req.body.birthday ? req.body.birthday : student.birthday;\r\n            student.save(function (err, student) {\r\n                if (err) {\r\n                    return res.status(500).json({\r\n                        message: 'Error saving'\r\n                    });\r\n                }\r\n                else if (!student) {\r\n                    return res.status(404).json({\r\n                        message: 'Not found'\r\n                    });\r\n                }\r\n                else {\r\n                    return res.json(student);\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * Delete by id\r\n */\r\nstudents.delete('/:id', function (req, res) {\r\n    var id = req.params.id;\r\n    console.log('About to delete student '+id);\r\n    Model.findOne({_id: id}, function (err, student) {\r\n        if (err) {\r\n            return res.status(500).json( {\r\n                message: 'Error finding object'\r\n            });\r\n        }\r\n        if (!student) {\r\n            return res.status(404).json({\r\n                message: 'Not found'\r\n            });\r\n        }\r\n        student.remove(function(err) {\r\n            if (err) {\r\n                return res.status(500).json({\r\n                    message: 'Error deleting'\r\n                });\r\n            }\r\n            return res.json({message:'Successfully deleted object'});\r\n        });\r\n    });\r\n});\r\n\r\n\r\n\r\nmodule.exports = students;"]}